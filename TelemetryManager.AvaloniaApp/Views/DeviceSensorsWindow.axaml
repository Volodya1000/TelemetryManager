<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:TelemetryManager.AvaloniaApp.ViewModels"
        x:Class="TelemetryManager.AvaloniaApp.Views.DeviceSensorsWindow"
        x:DataType="vm:DeviceSensorsViewModel"
        Title="{Binding DeviceHeader}">

  <StackPanel Margin="20" Spacing="10">
    <TextBlock Text="{Binding DeviceHeader}" FontSize="16"/>

    <!-- Блок ошибок -->
    <TextBlock Text="{Binding ErrorMessage}"
               Foreground="Red"
               TextWrapping="Wrap"
               MaxWidth="400"/>

    <!-- Форма добавления сенсора -->
    <Grid ColumnDefinitions="*,2*" RowDefinitions="Auto,Auto,Auto" RowSpacing="5">
      <!-- Тип сенсора -->
      <TextBlock Grid.Row="0" Grid.Column="0"
                 Text="Тип сенсора:"
                 VerticalAlignment="Center"/>
      <ComboBox Grid.Row="0" Grid.Column="1"
                ItemsSource="{Binding AvailableSensorTypes}"
                SelectedItem="{Binding SelectedSensorType}">
        <ComboBox.ItemTemplate>
          <DataTemplate>
            <TextBlock Text="{Binding Name.Value}"/>
          </DataTemplate>
        </ComboBox.ItemTemplate>
      </ComboBox>

      <!-- Source ID -->
      <TextBlock Grid.Row="1" Grid.Column="0"
                 Text="Source ID:"
                 VerticalAlignment="Center"/>
      <NumericUpDown Grid.Row="1" Grid.Column="1"
                     Value="{Binding SourceId}"
                     Minimum="0"
                     Maximum="255"
                     Watermark="0-255"/>

      <!-- Кнопка добавления -->
      <Button Grid.Row="2" Grid.Column="1"
              Content="Добавить сенсор"
              Command="{Binding AddSensorCommand}"
              HorizontalAlignment="Right"
              Padding="10 5"/>
    </Grid>

    <ListBox ItemsSource="{Binding Sensors}">
      <ListBox.ItemTemplate>
        <DataTemplate>
          <Grid ColumnDefinitions="Auto,Auto,*,Auto">
            <TextBlock Grid.Column="0" Text="{Binding TypeId}" Margin="5"/>
            <TextBlock Grid.Column="1" Text="{Binding SourceId}" Margin="5"/>
            <TextBlock Grid.Column="2" Text="{Binding Name}" Margin="5"/>
            <TextBlock Grid.Column="3" Text="{Binding ParametersCount}" Margin="5"/>
          </Grid>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox>
  </StackPanel>
</Window>