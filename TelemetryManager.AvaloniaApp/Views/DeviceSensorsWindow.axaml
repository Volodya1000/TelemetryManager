<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:dialogHost="clr-namespace:DialogHostAvalonia;assembly=DialogHost.Avalonia"
        xmlns:vm="clr-namespace:TelemetryManager.AvaloniaApp.ViewModels"
        x:Class="TelemetryManager.AvaloniaApp.Views.DeviceSensorsWindow"
        x:DataType="vm:DeviceSensorsViewModel"
        Title="{Binding DeviceHeader}">

  <dialogHost:DialogHost Identifier="MainDialogHost" Background="Transparent">
    <dialogHost:DialogHost.DialogContentTemplate>
      <DataTemplate>
        <Border Background="White" Padding="20" CornerRadius="5">
          <StackPanel Spacing="10" MinWidth="300">
            <TextBlock Text="{Binding ParameterName}" FontSize="16"/>

            <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto" Margin="0,10">
              <TextBlock Grid.Row="0" Grid.Column="0" Text="Min:" VerticalAlignment="Center"/>
              <NumericUpDown Grid.Row="0" Grid.Column="1"
                            Value="{Binding NewMin}"
                            Minimum="0" Maximum="1000000"/>

              <TextBlock Grid.Row="1" Grid.Column="0" Text="Max:" VerticalAlignment="Center"/>
              <NumericUpDown Grid.Row="1" Grid.Column="1"
                            Value="{Binding NewMax}"
                            Minimum="0" Maximum="1000000"/>
            </Grid>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="10">
              <Button Content="Применить"
                      Command="{x:Static dialogHost:DialogHost.CloseDialogCommand}"
                      CommandParameter="{Binding}"/>

              <Button Content="Отмена"
                      Command="{x:Static dialogHost:DialogHost.CloseDialogCommand}">
                <Button.CommandParameter>
                  <x:Null/>
                </Button.CommandParameter>
              </Button>
            </StackPanel>
          </StackPanel>
        </Border>
      </DataTemplate>
    </dialogHost:DialogHost.DialogContentTemplate>

    <!-- Существующий контент -->
    <StackPanel Margin="20" Spacing="10">
      <!-- ... существующий XAML ... -->

      <ListBox ItemsSource="{Binding Sensors}" BorderThickness="0" Padding="0">
        <ListBox.ItemTemplate>
          <DataTemplate>
            <Expander>
              <Expander.Header>
                <!-- ... заголовок сенсора ... -->
              </Expander.Header>

              <ItemsControl ItemsSource="{Binding Parameters}" Margin="20,5">
                <ItemsControl.ItemTemplate>
                  <DataTemplate>
                    <Grid ColumnDefinitions="*,Auto,Auto" Margin="0,2">
                      <TextBlock Grid.Column="0"
                                 Text="{Binding Name}"
                                 FontWeight="Bold"/>
                      <TextBlock Grid.Column="1"
                                 Text="{Binding IntervalDisplay}"
                                 Margin="10,0,10,0"/>
                      <Button Grid.Column="2"
                              Content="✏️"
                              Command="{Binding EditIntervalCommand}"
                              Background="Transparent"
                              BorderThickness="0"/>
                    </Grid>
                  </DataTemplate>
                </ItemsControl.ItemTemplate>
              </ItemsControl>
            </Expander>
          </DataTemplate>
        </ListBox.ItemTemplate>
      </ListBox>
    </StackPanel>
  </dialogHost:DialogHost>
</Window>